var clockInterval,clock,initial_uri,menu_mobile,timeout=0,pagina="",utente="",potere=0,avatar="avatar_base.png",informazioni="Version 5.0<br>Â© hackweb, Riccione / Bologna 2002 - 2018",sez=["","","",""],lang="en",include_dir="include",first_loaded=!1,menu_class=".hw-link",wp_endpoint="https://www.hackweb.it/hw_wordpress/wp-json/wp/v2/",monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],content_loaded={frontline:[],sticky:[],posts:[]},last_scroll=0,home_blog=1,home_blog_max=5,ctrlPressed=!1;$(function(){$("body").on("click",".hw-link",function(e){if(!ctrlPressed){switch(e.preventDefault(),$(this).attr("href")){case"logout":logout().then(function(e){});break;default:changePage($(this).attr("href"),".hw-link")}return!1}}),$(window).on("popstate",function(e){return e.preventDefault(),changeHistoryState(!0),!1}),$("body").on("click",".hwCookiePolicy",function(e){return e.preventDefault(),createCookie("hwCookiePolicy","display:none;",1e3),$("#cookie-popup").css("bottom",-$("#cookie-popup").outerHeight(!0)),!1}),$(document).keydown(function(e){17!=e.which&&91!=e.which&&16!=e.which||(ctrlPressed=!0)}),$(document).keyup(function(){ctrlPressed=!1})});var firstLoad=function(){$("#barra-sopra").load("include/admin.php"),$("#menu").load("include/menu.php",function(){initial_uri=host+uri_lang+sez[0];for(var e=1;e<sez.length;e++)""!=sez[e]&&(initial_uri+="/"+sez[e]);changePage(initial_uri,".hw-link",!1,!1)}),initMenu(),clockInterval=setInterval(function(){clock($("#clock"))},1e3)};function initMenu(){$("#menu-mobile").click(function(){$("#menu").fadeIn(function(){menu_mobile=!0,window.scroll({top:0,left:0}),$("#struttura").css("height","0").css("overflow","hidden")})}),$("body").on("click","#menu-close",function(){menu_mobile?($(this).html("men&ugrave;"),$("#struttura").removeClass("hidden"),$("#menu").removeClass("show"),$("#menu-content").removeClass("show"),menu_mobile=!1):($(this).html("close"),$("#struttura").addClass("hidden"),$("#menu").addClass("show"),$("#menu-content").addClass("show"),menu_mobile=!0)})}var changeUrl=function(e,t){var n=$.Deferred();$(t).each(function(){$(this).attr("href")!=e&&$(this).removeClass("active")}),$(t+'[href="'+e+'"]').addClass("active"),0==(e=e.includes(host+uri_lang)&&host+uri_lang!=="/"?e.split(host+uri_lang)[1]:e).indexOf("/")&&(e=e.replace("/","")),sez=e.split("/");for(var o=lang!=default_lang?lang+"/":"",r=0;r<sez.length;r++)o+=0===r?sez[r]:"/"+sez[r],"/"+sez[r];return 0!==sez.length&&""!==sez[0]||"home",window.history.pushState(null,null,o),n.resolve("url refreshed."),n.promise()},changePage=function(e,t,n,o,r){void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=!1);var a=$.Deferred();r||(last_scroll=$(window).scrollTop()),$(".navbar-toggler").hasClass("collapsed")||$(".navbar-toggler").click(),$(t).each(function(){$(this).attr("href")!=e&&$(this).removeClass("active")}),$(t+'[href="'+e+'"]').addClass("active"),0==(e=e.includes(host+uri_lang)&&host+uri_lang!=="/"?e.split(host+uri_lang)[1]:e).indexOf("/")&&(e=e.replace("/","")),sez=e.split("/");for(var s=lang!=default_lang?lang+"/":"",i=include_dir,l=0;l<sez.length;l++)s+=0===l?sez[l]:"/"+sez[l],i+="/"+sez[l];return 0!==sez.length&&""!==sez[0]||(i+="home"),n&&window.history.pushState(null,null,s),i.includes("/post/")?(cur_slug=i.substring(i.lastIndexOf("/post/")+"/post/".length),querystring="?post="+i.substring(i.lastIndexOf("/post/")+"/post/".length),i=i.substring(0,i.lastIndexOf("/post")+"/post".length)):i.includes("/cookie")?i=i.replace("/cookie","/cookie_policy"):i.includes("/privacy")&&(i=i.replace("/privacy","/privacy_policy")),i.includes("/cat/")&&(cur_slug=i.substring(i.lastIndexOf("/cat/")+"/cat/".length),querystring="?cat="+i.substring(i.lastIndexOf("/cat/")+"/cat/".length),i=i.substring(0,i.lastIndexOf("/cat")+"/cat".length)),i+=".php"+querystring,first_loaded&&(void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1)),menu_mobile&&$("#menu-close").click(),o?$.ajax({type:"POST",url:i,async:!0,cache:!1,error:function(e,t,n){$("#content").html('<div class="container">Error 404 | Page not found...</div>')},xhr:function(){var e=new window.XMLHttpRequest;return e.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total,n=Math.round(100*t)+"%";$("#loading_bar").stop().animate({width:n},300,function(){1==t&&$("#loading_bar").hide()})}},!1),e},beforeSend:function(){$("#loading_bar").css("width","1%"),$("#loading_bar").show()},complete:function(){$("#loading_bar").stop().animate({width:"100%"},300,function(){$("#loading_bar").hide()})},success:function(e){$("#content").html(e),r?($("html, body").animate({scrollTop:last_scroll},0),last_scroll=0):$("html, body").animate({scrollTop:0},0),first_loaded=!0,a.resolve("page loaded.")}}):a.resolve("loaded without rendering"),a.promise()},changeHistoryState=function(e){var t=host+uri_lang,n=window.location.pathname,o=n.replace(t,""),r=n.substring(n.indexOf(t)+t.length,n.length);o==n&&(r=n.substring(n.indexOf(host)+host.length,n.length)),0!==r.length&&1!=r.length||(r=""),changePage(host+uri_lang+r,".hw-link",!1,!0,e)};function clock(e){var t=new Date,n=t.getHours(),o=t.getMinutes(),r=t.getSeconds();n<=9&&(n="0"+n),r<=9&&(r="0"+r),o<=9&&(o="0"+o),e.html(t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" - "+n+":"+o+":"+r)}function parallax(){var e=$(window).scrollTop();$("#backgr").css("top",0-.2*e+"px"),$("#immagini").css("top",0-.5*e+"px")}function startVideo(){$("#fascia4").offset().top-100<=$(window).scrollTop()&&player.play()}function objectifyForm(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=e[n].value;return t}var logout=function(){var t=$.Deferred();return $.ajax({type:"POST",url:"libs/call_func.php",data:JSON.stringify({action:"logout",data:{test:"test"}}),contentType:"application/json",async:!0,success:function(e){0!=(e=JSON.parse(e)).success&&2!=e.success||($("#barra-sopra").html("sei uscito"),$("#menu").load("include/menu.php",function(){changePage(host+uri_lang,".hw-link",!0),utente="",t.resolve(e)}))}}),t.promise()},validateForm=function(e){var t=!1;for(i in e)e[i]?$('.required[name="'+i+'"]').removeClass("warning"):(t=!0,$('.required[name="'+i+'"]').addClass("warning"));return t?"fill all mandatory fields":e.password.length<8?"password must be more than 8 chars":e.password!==e.password_check?"passwords must be the same":isEmail(e.email)?"ok":"insert valid email"};function isEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function createCookie(e,t,n){if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="; expires="+o.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function deleteCookie(e){createCookie(e,"",-1)}function parseSticky(e){for(var t=0;t<e.length;t++){$(".sticky_post-"+t+" .title").html(e[t].title.rendered);var n=140;992<=$(document).width()&&(n=200),$(".sticky_post-"+t+" .excerpt").html(e[t].excerpt.rendered.substring(0,n).substr(0,e[t].excerpt.rendered.substring(0,n).lastIndexOf(" "))+" ...");var o=new Date(e[t].date);$(".sticky_post-"+t+" .date").html(monthNames[o.getMonth()]+" "+o.getFullYear()),$(".sticky_post-"+t+" .link").removeClass("opaque");var r=$(".sticky_post-"+t+" .hw-link").attr("href");$(".sticky_post-"+t+" .hw-link").attr("href",r+e[t].slug)}}function parseCategory(e,n,o){var r=$.Deferred(),t=wp_endpoint+"categories/"+e;return $.ajax({type:"GET",url:t,async:!0,cache:!1,error:function(e,t,n){},xhr:function(){return new window.XMLHttpRequest},beforeSend:function(){},complete:function(){},success:function(e){var t=[];t[0]=n,t[1]=e,t[2]=o,r.resolve(t)}}),r.promise()}function createBlog(e,t){t=void 0===t?"":"&categories="+t;var r=$.Deferred();return dataURL=wp_endpoint+"posts/?_embed&lang="+wp_lang+"&per_page="+home_blog_max+"&page="+e+"&tags_exclude=40,41,42,43"+t,console.log(dataURL),$.ajax({type:"GET",url:dataURL,async:!0,cache:!1,error:function(e,t,n){r.resolve("error")},xhr:function(){return new window.XMLHttpRequest},beforeSend:function(){},complete:function(){},success:function(e){for(var t={render:[],data:e},n=0;n<e.length;n++){var o=new Date(e[n].date);t.render[n]='<div class="blog-post" post="post-'+e[n].id+'"><a class="blog-link hw-link" href="'+href_link+"post/"+e[n].slug+'"><h3 class="blog-post-title" >'+e[n].title.rendered+'</h3></a><p class="blog-post-meta">'+monthNames[o.getMonth()]+" "+o.getFullYear()+' by <span class="color-1">'+e[n]._embedded.author[0].name+'</span><br><span class="text-primary categories"></span></p>'+e[n].content.rendered+"</div>"}r.resolve(t)}}),r.promise()}function getPost(e){var t=$.Deferred();return dataURL=wp_endpoint+"posts/?_embed&lang="+wp_lang+"&slug="+e,$.ajax({type:"GET",url:dataURL,async:!0,cache:!1,error:function(e,t,n){},xhr:function(){return new window.XMLHttpRequest},beforeSend:function(){},complete:function(){},success:function(e){t.resolve(e)}}),t.promise()}function getCategoryIdBySlug(e){var o=$.Deferred();return dataURL=wp_endpoint+"categories?slug="+e+"&lang="+wp_lang,$.ajax({type:"GET",url:dataURL,async:!0,cache:!1,error:function(e,t,n){o.resolve("error")},xhr:function(){return new window.XMLHttpRequest},beforeSend:function(){},complete:function(){},success:function(e){0==e.length?o.resolve("error"):o.resolve(e[0].id)}}),o.promise()}